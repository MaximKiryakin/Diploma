# –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–Ω—ã–º –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º —Å —É—á–µ—Ç–æ–º –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π  

**–ö—É—Ä—Å–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞**  

–§–∞–∫—É–ª—å—Ç–µ—Ç –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –∏ –∫–∏–±–µ—Ä–Ω–µ—Ç–∏–∫–∏ –ú–ì–£ –∏–º. –ú.–í. –õ–æ–º–æ–Ω–æ—Å–æ–≤–∞.  
**–ê–≤—Ç–æ—Ä:** –ö–∏—Ä—è–∫–∏–Ω –ú–∞–∫—Å–∏–º –í–∞–ª–µ—Ä—å–µ–≤–∏—á  
**–ù–∞—É—á–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å:** –∫.—Ñ.–º.–Ω. –ö—É—Ä–µ–Ω–Ω–æ–π –î–º–∏—Ç—Ä–∏–π –°–≤—è—Ç–æ—Å–ª–∞–≤–æ–≤–∏—á  

---

## –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å

<div style="text-align: justify;">
–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–∏—Ä–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –±–µ—Å–ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–Ω—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏: –ø–∞–Ω–¥–µ–º–∏—è COVID-19, –≥–µ–æ–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, —Ä–µ–∫–æ—Ä–¥–Ω–∞—è –∏–Ω—Ñ–ª—è—Ü–∏—è –≤ —Ä–∞–∑–≤–∏—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –∫—Ä–∏–∑–∏—Å –≤ –ï–≤—Ä–æ–ø–µ. –≠—Ç–∏ —Ñ–∞–∫—Ç–æ—Ä—ã —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Å—Ä–µ–¥—É –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏, –≥–¥–µ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–Ω—ã–º –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º–∏. –†–µ–∑–∫–∏–µ –∫–æ–ª–µ–±–∞–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π ‚Äî –í–í–ü, –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü—ã, —Å—Ç–∞–≤–æ–∫ –¶–ë –∏ –¥—Ä. –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è—é—Ç –Ω–∞ –ø–ª–∞—Ç–µ–∂–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∑–∞–µ–º—â–∏–∫–æ–≤, —É–≤–µ–ª–∏—á–∏–≤–∞—è —Ä–∏—Å–∫–∏ –¥–µ—Ñ–æ–ª—Ç–æ–≤. –í —Ç–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥–µ–ª–µ–π, —É—á–∏—Ç—ã–≤–∞—é—â–∏—Ö –Ω–µ —Ç–æ–ª—å–∫–æ –º–∏–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ, –Ω–æ –∏ –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è –∏ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —É–±—ã—Ç–∫–æ–≤.
</div>

---

## üìå –û –ø—Ä–æ–µ–∫—Ç–µ
–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –º–æ–¥–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–Ω—ã–º –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –±–∞–Ω–∫–æ–≤ —Å —É—á–µ—Ç–æ–º –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤. –í —Ä–∞–±–æ—Ç–µ:
- –ü—Ä–æ–≤–µ–¥–µ–Ω –∞–Ω–∞–ª–∏–∑ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –æ—Ü–µ–Ω–∫–∏ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ —Ä–∏—Å–∫–∞ (Moody‚Äôs KMV, Credit Portfolio View).
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –ú–µ—Ä—Ç–æ–Ω–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–µ—Ñ–æ–ª—Ç–∞ (PD) —Å —É—á–µ—Ç–æ–º –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (–∏–Ω—Ñ–ª—è—Ü–∏—è, –∫–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞ –¶–ë –†–§, –∫—É—Ä—Å —Ä—É–±–ª—è).
- –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å –Ω–∞ Python –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è, –≤–∫–ª—é—á–∞—è –º–µ—Ç–æ–¥—ã Ridge-—Ä–µ–≥—Ä–µ—Å—Å–∏–∏, VAR-–∞–Ω–∞–ª–∏–∑–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
- –í—ã—è–≤–ª–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –≤–ª–∏—è–Ω–∏—è –º–∞–∫—Ä–æ—à–æ–∫–æ–≤ –Ω–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∑–∞—ë–º—â–∏–∫–æ–≤.

---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã:
- Python 3.10+
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏: `numpy`, `pandas`, `scipy`, `matplotlib`, `statsmodels`, `scikit-learn`

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤–∫–ª—é—á–∞–µ—Ç:
- –ö–ª–∞—Å—Å `Portfolio` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –∏ —Ä–∞—Å—á–µ—Ç–æ–≤.
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (—Å–º. —Ä–∞–∑–¥–µ–ª [–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞](#–ø—Ä–∏–º–µ—Ä-–∑–∞–ø—É—Å–∫–∞)).

---

## üìä –ö–ª—é—á–µ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
### 1. –í–ª–∏—è–Ω–∏–µ –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –Ω–∞ PD
- –†–æ—Å—Ç –∏–Ω—Ñ–ª—è—Ü–∏–∏ –Ω–∞ 1% —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç PD –Ω–∞ 1.2 –±.–ø. –¥–ª—è –ì–∞–∑–ø—Ä–æ–º–∞.
- –û—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ä—É–±–ª—è (USD/RUB) –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—é —Å—ã—Ä—å–µ–≤—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π (–∫–æ—ç—Ñ. 0.073 –¥–ª—è GMKN), –Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –¥–æ–ª–≥–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É —ç–∫—Å–ø–æ—Ä—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π (–∫–æ—ç—Ñ. -0.094 –¥–ª—è –†–æ—Å–Ω–µ—Ñ—Ç–∏).

![–î–∏–Ω–∞–º–∏–∫–∞ PD –ø–æ –æ—Ç—Ä–∞—Å–ª—è–º](text/img/GAZP_pd.png)  
*–†–∏—Å. 1: –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–µ—Ñ–æ–ª—Ç–∞ (PD) –¥–ª—è –ì–∞–∑–ø—Ä–æ–º–∞.*

### 2. –ê–Ω–∞–ª–∏–∑ –∏–º–ø—É–ª—å—Å–Ω—ã—Ö –æ—Ç–∫–ª–∏–∫–æ–≤ (IRF)
- –®–æ–∫ –∏–Ω—Ñ–ª—è—Ü–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç PD (1.5‚Äì2 –±.–ø.).
- –®–æ–∫ –∫–ª—é—á–µ–≤–æ–π —Å—Ç–∞–≤–∫–∏ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ø–∏–∫–∞ —á–µ—Ä–µ–∑ 3‚Äì4 –∫–≤–∞—Ä—Ç–∞–ª–∞.

![–ò–º–ø—É–ª—å—Å–Ω—ã–µ –æ—Ç–∫–ª–∏–∫–∏](text/img/irf_inflation_PD.png) 
![–ò–º–ø—É–ª—å—Å–Ω—ã–µ –æ—Ç–∫–ª–∏–∫–∏](text/img/irf_interest_rate_PD.png) 
*–†–∏—Å. 2: –†–µ–∞–∫—Ü–∏—è PD –Ω–∞ –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —à–æ–∫–∏.*

### 3. –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- –ù–∏–∑–∫–∞—è –≤–Ω—É—Ç—Ä–∏—Å–µ–∫—Ç–æ—Ä–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è (–Ω–∞–ø—Ä., 0.29 –º–µ–∂–¥—É –ì–∞–∑–ø—Ä–æ–º–æ–º –∏ –õ—É–∫–æ–π–ª–æ–º) —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ä–∏—Å–∫–∞–º.

![–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞](text/img/corr_matrix.png)  
*–†–∏—Å. 3: –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Ü–µ–Ω –∞–∫—Ü–∏–π –∫–æ–º–ø–∞–Ω–∏–π –ø–æ—Ä—Ç—Ñ–µ–ª—è.*

---

## –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞
```python
from utils.portfolio import Portfolio

# –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞
calc = Portfolio(
    dt_calc='30.10.2024',
    dt_start='03.11.2019',
    tickers_list=['GAZP', 'SBER', 'GMKN', 'ROSN', ...]
)

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø—É—Å–∫ —Ä–∞—Å—á–µ—Ç–æ–≤
calc.load_stock_data()
    .add_macro_data()
    .add_merton_pd()
    .plot_pd_by_tickers()
    .calc_irf()
    .plot_correlation_matrix()
